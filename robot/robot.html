<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" href="robot.css" />
	</head>

	<body>
		<div class="minifigure">
			<div class="head">
				<div class="faces-wrap">
					<div class="faces">
						<div class="face classic">
							<div class="eye right"></div>
							<div class="eye left"></div>
							<div class="mouth"></div>
						</div>

						<div class="face smile">
							<div class="eye right">
								<div class="brow"></div>
							</div>
							<div class="eye left">
								<div class="brow"></div>
							</div>
							<div class="mouth"></div>
						</div>

						<div class="face large-smile">
							<div class="eye right">
								<div class="brow"></div>
							</div>
							<div class="eye left">
								<div class="brow"></div>
							</div>
							<div class="mouth"></div>
						</div>

						<div class="face worried">
							<div class="eye right">
								<div class="brow"></div>
							</div>
							<div class="eye left">
								<div class="brow"></div>
							</div>
							<div class="mouth"></div>
						</div>

						<div class="face frown">
							<div class="eye right">
								<div class="brow"></div>
							</div>
							<div class="eye left">
								<div class="brow"></div>
							</div>
							<div class="mouth"></div>
						</div>

						<div class="face surprised">
							<div class="eye right">
								<div class="brow"></div>
							</div>
							<div class="eye left">
								<div class="brow"></div>
							</div>
							<div class="mouth"></div>
						</div>
					</div>
				</div>
			</div>
			<div class="upper-body">
				<div class="torso"></div>
				<div class="arm right">
					<div class="hand right"></div>
				</div>
				<div class="arm left">
					<div class="hand left"></div>
				</div>
			</div>
			<div class="lower-body">
				<div class="waist"></div>
				<div class="crotch"></div>
				<div class="leg right"></div>
				<div class="leg left"></div>
			</div>
		</div>

		<div class="controls">
			<h2 class="title">Controls</h2>

			<button class="button explode">Explode</button>
			<button class="button randomize">Randomize</button>

			<fieldset class="head-expression">
				<legend>Head</legend>

				<div class="form-element">
					<label for="expression">Expression</label>
					<input id="expression" class="expression-range expression" name="expression" type="range" min="0" max="500" step="100" value="0">
				</div>
			</fieldset>

			<fieldset class="upper-color">
				<legend>Upper Body</legend>

				<div class="form-element">
					<label for="upper-hue">Hue</label>
					<input id="upper-hue" class="color-range upper-hue" name="upper-hue" type="range" min="0" max="360" value="200">
				</div>

				<div class="form-element">
					<label for="upper-saturation">Saturation</label>
					<input id="upper-saturation" class="color-range upper-saturation" name="upper-saturation" type="range" min="0" max="100" value="0">
				</div>

				<div class="form-element">
					<label for="upper-lightness">Lightness</label>
					<input id="upper-lightness" class="color-range upper-lightness" name="upper-lightness" type="range" min="0" max="90" value="90">
				</div>
			</fieldset>

			<fieldset class="lower-color">
				<legend>Lower Body</legend>

				<div class="form-element">
					<label for="lower-hue">Hue</label>
					<input id="lower-hue" class="color-range lower-hue" name="lower-hue" type="range" min="0" max="360" value="200">
				</div>

				<div class="form-element">
					<label for="lower-saturation">Saturation</label>
					<input id="lower-saturation" class="color-range lower-saturation" name="lower-saturation" type="range" min="0" max="100" value="0">
				</div>

				<div class="form-element">
					<label for="lower-lightness">Lightness</label>
					<input id="lower-lightness" class="color-range lower-lightness" name="lower-lightness" type="range" min="0" max="90" value="90">
				</div>
			</fieldset>
		</div>
		<script type="text/javascript">
			var minifigure = document.querySelector('.minifigure');
			var faces = document.querySelector('.faces');
			var upperBody = document.querySelector('.upper-body');
			var lowerBody = document.querySelector('.lower-body');
			var explode = document.querySelector('.explode');
			var randomize = document.querySelector('.randomize');
			var expressionRangeInput = document.querySelector('.expression-range');
			var colorRangeInput = document.querySelectorAll('.color-range');
			var upperHue = document.getElementById('upper-hue');
			var upperSaturation = document.getElementById('upper-saturation');
			var upperLightness = document.getElementById('upper-lightness');
			var lowerHue = document.getElementById('lower-hue');
			var lowerSaturation = document.getElementById('lower-saturation');
			var lowerLightness = document.getElementById('lower-lightness');

			explode.addEventListener('click', explodeMinifigure);
			randomize.addEventListener('click', randomizeInputs);
			expressionRangeInput.addEventListener('input', setExpression);

			for(var i = 0; i < colorRangeInput.length; i++) {
				colorRangeInput[i].addEventListener('input', setColors);
			}

			function getRandomNum(min, max) {
				return Math.random() * (max - min) + min;
			}

			function explodeMinifigure() {
				minifigure.classList.toggle('explode');

				if(minifigure.classList.contains('explode')) {
					explode.innerHTML = 'Rebuild';
				} else {
					explode.innerHTML = 'Explode';
				}
			};

			function randomizeInputs() {
				var randomExpression = getRandomNum(0, 5);
				var randomUpperHue = getRandomNum(0, 360);
				var randomUpperSaturation = getRandomNum(0, 100);
				var randomUpperLightness = getRandomNum(0, 90);
				var randomLowerHue = getRandomNum(0, 360);
				var randomLowerSaturation = getRandomNum(0, 100);
				var randomLowerLightness = getRandomNum(0, 90);

				expressionRangeInput.value = randomExpression * 100;
				upperHue.value = randomUpperHue;
				upperSaturation.value = randomUpperSaturation;
				upperLightness.value = randomUpperLightness;
				lowerHue.value = randomLowerHue;
				lowerSaturation.value = randomLowerSaturation;
				lowerLightness.value = randomLowerLightness;

				setExpression();
				setColors();
			};

			function setExpression() {
				var expressionVal = parseInt(expressionRangeInput.value);
				faces.style.transform = 'translateX(-' + expressionVal + '%)';
			};

			function setColors() {
				var upperHueVal = parseInt(upperHue.value);
				var upperSaturationVal = parseInt(upperSaturation.value);
				var upperLightnessVal = parseInt(upperLightness.value);
				var lowerHueVal = parseInt(lowerHue.value);
				var lowerSaturationVal = parseInt(lowerSaturation.value);
				var lowerLightnessVal = parseInt(lowerLightness.value);

				upperBody.style.color = 'hsl(' + upperHueVal + ',' + upperSaturationVal + '%,' + upperLightnessVal + '%)';
				lowerBody.style.color = 'hsl(' + lowerHueVal + ',' + lowerSaturationVal + '%,' + lowerLightnessVal + '%)';
			};
		</script>
	</body>

</html>